{% extends "layout.html" %}

{% block page_title %}√úr√ºnler{% endblock %}

{% block content %}
<style>
.urun-header {
    background: #0f2537;
    padding: 12px;
    margin: -10px -10px 10px -10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.urun-header h2 {
    color: #4fc3f7;
    margin: 0;
    font-size: 16px;
}
.urun-buttons button {
    background: #00bcd4;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 3px;
    cursor: pointer;
    font-size: 13px;
    margin-left: 8px;
}
.urun-grid {
    width: 100%;
    background: #243447;
    border-collapse: collapse;
    font-size: 12px;
}
.urun-grid th {
    background: #0097a7;
    color: white;
    padding: 8px;
    text-align: left;
    font-size: 11px;
}
.urun-grid td {
    padding: 8px;
    border-bottom: 1px solid #2d4060;
    color: #e0f7fa;
}
.urun-grid tr:hover {
    background: #2d4060;
    cursor: pointer;
}
</style>

<div class="urun-header">
    <h2>üì¶ √úr√ºnler</h2>
    <div class="urun-buttons">
        <button onclick="yeniUrun()">‚ûï Yeni √úr√ºn</button>
        <button onclick="yenile()">‚Ü∫ Yenile</button>
    </div>
</div>

<div style="overflow: auto; max-height: 600px;">
    <table class="urun-grid">
        <thead>
            <tr>
                <th>√úr√ºn Adƒ±</th>
                <th>Stok Kodu</th>
                <th>Birim</th>
                <th>Birim Fiyat (‚Ç∫)</th>
                <th>Stok</th>
                <th>D√º≈ü√ºk Stok (<10)</th>
                <th>A√ßƒ±klama</th>
                <th>ƒ∞≈ülem</th>
            </tr>
        </thead>
        <tbody>
            {% if urunler %}
                {% for u in urunler %}
                <tr onclick="selectUrun({{ u.id }})" {% if u.stok < 10 %}style="background: #4a1a1a;"{% endif %}>
                    <td><strong>{{ u.urun_adi }}</strong></td>
                    <td>{{ u.stok_kodu }}</td>
                    <td>{{ u.birim }}</td>
                    <td style="text-align: right;">{{ '%.2f'|format(u.birim_fiyat or 0) }}</td>
                    <td style="text-align: center;">{{ u.stok or 0 }}</td>
                    <td style="text-align: center;">{% if u.stok < 10 %}‚ö†Ô∏è{% else %}‚Äî{% endif %}</td>
                    <td>{{ u.aciklama or '‚Äî' }}</td>
                    <td>
                        <button onclick="duzenle({{ u.id }})" style="background: #00bcd4; color: white; border: none; padding: 4px 8px; border-radius: 3px; font-size: 11px;">‚úèÔ∏è D√ºzenle</button>
                    </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="8" style="text-align: center; padding: 40px; color: #6b7280;">
                        Hen√ºz √ºr√ºn kaydƒ± yok
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>

<script>
function yeniUrun() {
    window.location.href = "{{ url_for('urunler.yeni') }}";
}

function yenile() {
    location.reload();
}

function selectUrun(id) {
    console.log('Se√ßili √ºr√ºn:', id);
}

function duzenle(id) {
    window.location.href = `/urunler/${id}/duzenle`;
}
</script>
{% endblock %}