{% extends "layout.html" %}

{% block page_title %}Kira Senaryo Hesaplama{% endblock %}

{% block content %}
<style>
.kira-header {
    background: #0f2537;
    padding: 12px 16px;
    margin: -10px -10px 10px -10px;
}
.kira-header h2 {
    color: #4fc3f7;
    margin: 0;
    font-size: 16px;
}
.musteri-select {
    background: #1e3a50;
    padding: 12px;
    margin-bottom: 12px;
    border-radius: 4px;
}
.musteri-select h3 {
    color: #4fc3f7;
    font-size: 14px;
    margin: 0 0 10px 0;
}
.musteri-select select {
    width: 100%;
    background: #2d4060;
    border: 1px solid #3d5070;
    color: #e0f7fa;
    padding: 8px 12px;
    border-radius: 3px;
    font-size: 14px;
}
.ayarlar-panel {
    background: #1e3a50;
    padding: 12px;
    margin-bottom: 12px;
    border-radius: 4px;
}
.ayarlar-panel h3 {
    color: #4fc3f7;
    font-size: 14px;
    margin: 0 0 10px 0;
}
.ayarlar-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 10px;
}
.ayar-item label {
    display: block;
    color: #90a4ae;
    font-size: 11px;
    margin-bottom: 4px;
}
.ayar-item input {
    width: 100%;
    background: #2d4060;
    border: 1px solid #3d5070;
    color: #e0f7fa;
    padding: 6px 8px;
    border-radius: 3px;
    font-size: 12px;
    text-align: right;
}
.sonuc-panel {
    background: #1e3a50;
    padding: 12px;
    border-radius: 4px;
}
.sonuc-panel h3 {
    color: #4fc3f7;
    font-size: 14px;
    margin: 0 0 10px 0;
}
.sonuc-table {
    width: 100%;
    background: #243447;
    border-collapse: collapse;
    font-size: 12px;
}
.sonuc-table th {
    background: #0097a7;
    color: white;
    padding: 8px 6px;
    text-align: center;
    font-size: 11px;
}
.sonuc-table td {
    padding: 6px 8px;
    border-bottom: 1px solid #2d4060;
    text-align: right;
    color: #e0f7fa;
}
.sonuc-table td:first-child {
    text-align: center;
}
</style>

<div class="kira-header">
    <h2>ğŸ“ˆ Kira ArtÄ±ÅŸ Senaryo Hesaplama</h2>
</div>

<!-- MÃ¼ÅŸteri SeÃ§imi -->
<div class="musteri-select">
    <h3>1ï¸âƒ£ MÃ¼ÅŸteri SeÃ§in</h3>
    <select id="musteri-sec" onchange="musteriSec()">
        <option value="">â€” MÃ¼ÅŸteri SeÃ§in â€”</option>
        {% for m in musteriler %}
        <option value="{{ m.id }}">{{ m.name }}</option>
        {% endfor %}
    </select>
</div>

<!-- Senaryo AyarlarÄ± -->
<div class="ayarlar-panel">
    <h3>2ï¸âƒ£ Senaryo AyarlarÄ±</h3>
    <div class="ayarlar-grid">
        {% for ay in ['Ocak', 'Åubat', 'Mart', 'Nisan', 'MayÄ±s', 'Haziran', 'Temmuz', 'AÄŸustos', 'EylÃ¼l', 'Ekim', 'KasÄ±m', 'AralÄ±k'] %}
        <div class="ayar-item">
            <label>{{ ay }} (%):</label>
            <input type="text" placeholder="0,00" id="oran-{{ loop.index }}">
        </div>
        {% endfor %}
    </div>
    <div style="margin-top: 12px; text-align: center;">
        <button onclick="hesapla()" style="background: #00bcd4; color: white; border: none; padding: 10px 30px; border-radius: 3px; cursor: pointer; font-weight: bold; font-size: 14px;">
            ğŸ§® HESAPLA
        </button>
    </div>
</div>

<!-- SonuÃ§lar -->
<div class="sonuc-panel">
    <h3>3ï¸âƒ£ Hesaplama SonuÃ§larÄ±</h3>
    <p style="color: #90a4ae; font-size: 13px; margin-bottom: 10px;">
        HenÃ¼z hesaplama yapÄ±lmadÄ±. YukarÄ±dan mÃ¼ÅŸteri seÃ§in ve HESAPLA butonuna basÄ±n.
    </p>
    <table class="sonuc-table">
        <thead>
            <tr>
                <th>Ay</th>
                <th>ArtÄ±ÅŸ OranÄ± (%)</th>
                <th>Ã–nceki Kira (â‚º)</th>
                <th>ArtÄ±ÅŸ (â‚º)</th>
                <th>Yeni Kira (â‚º)</th>
            </tr>
        </thead>
        <tbody id="sonuc-tbody">
            <tr>
                <td colspan="5" style="text-align: center; padding: 20px; color: #6b7280;">
                    SonuÃ§lar burada gÃ¶rÃ¼necek
                </td>
            </tr>
        </tbody>
    </table>
</div>

<script>
function musteriSec() {
    const musteriId = document.getElementById('musteri-sec').value;
    if(musteriId) {
        console.log('SeÃ§ili mÃ¼ÅŸteri ID:', musteriId);
        // TODO: MÃ¼ÅŸteri bilgilerini yÃ¼kle
    }
}

function hesapla() {
    const musteriId = document.getElementById('musteri-sec').value;
    if(!musteriId) {
        alert('âš ï¸ LÃ¼tfen Ã¶nce bir mÃ¼ÅŸteri seÃ§in!');
        return;
    }
    alert('Hesaplama yapÄ±lÄ±yor...');
    // TODO: Backend'e istek at, sonuÃ§larÄ± gÃ¶ster
}
</script>
{% endblock %}